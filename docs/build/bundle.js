var app=function(){"use strict";function t(){}const e=t=>t;function i(t,e){for(const i in e)t[i]=e[i];return t}function s(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(s)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let h;function l(t,e){return h||(h=document.createElement("a")),h.href=e,t===h.href}function c(e,...i){if(null==e)return t;const s=e.subscribe(...i);return s.unsubscribe?()=>s.unsubscribe():s}function p(t,e,i){t.$$.on_destroy.push(c(e,i))}function g(t,e,i,s){if(t){const n=d(t,e,i,s);return t[0](n)}}function d(t,e,s,n){return t[1]&&n?i(s.ctx.slice(),t[1](n(e))):s.ctx}function u(t,e,i,s){if(t[2]&&s){const n=t[2](s(i));if(void 0===e.dirty)return n;if("object"==typeof n){const t=[],i=Math.max(e.dirty.length,n.length);for(let s=0;s<i;s+=1)t[s]=e.dirty[s]|n[s];return t}return e.dirty|n}return e.dirty}function f(t,e,i,s,n,o){if(n){const r=d(e,i,s,o);t.p(r,n)}}function m(t){if(t.ctx.length>32){const e=[],i=t.ctx.length/32;for(let t=0;t<i;t++)e[t]=-1;return e}return-1}function w(t){const e={};for(const i in t)"$"!==i[0]&&(e[i]=t[i]);return e}function y(t,e){const i={};e=new Set(e);for(const s in t)e.has(s)||"$"===s[0]||(i[s]=t[s]);return i}const x="undefined"!=typeof window;let b=x?()=>window.performance.now():()=>Date.now(),P=x?t=>requestAnimationFrame(t):t;const $=new Set;function S(t){$.forEach((e=>{e.c(t)||($.delete(e),e.f())})),0!==$.size&&P(S)}function v(t,e){t.appendChild(e)}function C(t,e,i){t.insertBefore(e,i||null)}function I(t){t.parentNode.removeChild(t)}function T(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function D(t){return document.createElement(t)}function R(t){return document.createTextNode(t)}function k(){return R(" ")}function B(){return R("")}function A(t,e,i,s){return t.addEventListener(e,i,s),()=>t.removeEventListener(e,i,s)}function E(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function L(t,e){const i=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)null==e[s]?t.removeAttribute(s):"style"===s?t.style.cssText=e[s]:"__value"===s?t.value=t[s]=e[s]:i[s]&&i[s].set?t[s]=e[s]:E(t,s,e[s])}let M;function _(t){M=t}function W(){if(!M)throw new Error("Function called outside component initialization");return M}function H(t){W().$$.on_mount.push(t)}function j(){const t=W();return(e,i)=>{const s=t.$$.callbacks[e];if(s){const n=function(t,e,i=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,i,!1,e),s}(e,i);s.slice().forEach((e=>{e.call(t,n)}))}}}function O(t,e){W().$$.context.set(t,e)}function F(t){return W().$$.context.get(t)}const G=[],z=[],q=[],U=[],N=Promise.resolve();let Y=!1;function Z(t){q.push(t)}let K=!1;const X=new Set;function V(){if(!K){K=!0;do{for(let t=0;t<G.length;t+=1){const e=G[t];_(e),J(e.$$)}for(_(null),G.length=0;z.length;)z.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];X.has(e)||(X.add(e),e())}q.length=0}while(G.length);for(;U.length;)U.pop()();Y=!1,K=!1,X.clear()}}function J(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}const Q=new Set;let tt;function et(){tt={r:0,c:[],p:tt}}function it(){tt.r||o(tt.c),tt=tt.p}function st(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function nt(t,e,i,s){if(t&&t.o){if(Q.has(t))return;Q.add(t),tt.c.push((()=>{Q.delete(t),s&&(i&&t.d(1),s())})),t.o(e)}}function ot(t,e){const i={},s={},n={$$scope:1};let o=t.length;for(;o--;){const r=t[o],a=e[o];if(a){for(const t in r)t in a||(s[t]=1);for(const t in a)n[t]||(i[t]=a[t],n[t]=1);t[o]=a}else for(const t in r)n[t]=1}for(const t in s)t in i||(i[t]=void 0);return i}function rt(t){return"object"==typeof t&&null!==t?t:{}}function at(t){t&&t.c()}function ht(t,e,i,n){const{fragment:a,on_mount:h,on_destroy:l,after_update:c}=t.$$;a&&a.m(e,i),n||Z((()=>{const e=h.map(s).filter(r);l?l.push(...e):o(e),t.$$.on_mount=[]})),c.forEach(Z)}function lt(t,e){const i=t.$$;null!==i.fragment&&(o(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function ct(t,e){-1===t.$$.dirty[0]&&(G.push(t),Y||(Y=!0,N.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pt(e,i,s,r,a,h,l,c=[-1]){const p=M;_(e);const g=e.$$={fragment:null,ctx:null,props:h,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:i.context||[]),callbacks:n(),dirty:c,skip_bound:!1,root:i.target||p.$$.root};l&&l(g.root);let d=!1;if(g.ctx=s?s(e,i.props||{},((t,i,...s)=>{const n=s.length?s[0]:i;return g.ctx&&a(g.ctx[t],g.ctx[t]=n)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](n),d&&ct(e,t)),i})):[],g.update(),d=!0,o(g.before_update),g.fragment=!!r&&r(g.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);g.fragment&&g.fragment.l(t),t.forEach(I)}else g.fragment&&g.fragment.c();i.intro&&st(e.$$.fragment),ht(e,i.target,i.anchor,i.customElement),V()}_(p)}class gt{$destroy(){lt(this,1),this.$destroy=t}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const dt=[];function ut(e,i=t){let s;const n=new Set;function o(t){if(a(e,t)&&(e=t,s)){const t=!dt.length;for(const t of n)t[1](),dt.push(t,e);if(t){for(let t=0;t<dt.length;t+=2)dt[t][0](dt[t+1]);dt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(r,a=t){const h=[r,a];return n.add(h),1===n.size&&(s=i(o)||t),r(e),()=>{n.delete(h),0===n.size&&(s(),s=null)}}}}function ft(e,i,s){const n=!Array.isArray(e),a=n?[e]:e,h=i.length<2;return{subscribe:ut(s,(e=>{let s=!1;const l=[];let p=0,g=t;const d=()=>{if(p)return;g();const s=i(n?l[0]:l,e);h?e(s):g=r(s)?s:t},u=a.map(((t,e)=>c(t,(t=>{l[e]=t,p&=~(1<<e),s&&d()}),(()=>{p|=1<<e}))));return s=!0,d(),function(){o(u),g()}})).subscribe}}const mt={},wt={};function yt(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}const xt=function(t,e){const i=[];let s=yt(t);return{get location(){return s},listen(e){i.push(e);const n=()=>{s=yt(t),e({location:s,action:"POP"})};return t.addEventListener("popstate",n),()=>{t.removeEventListener("popstate",n);const s=i.indexOf(e);i.splice(s,1)}},navigate(e,{state:n,replace:o=!1}={}){n={...n,key:Date.now()+""};try{o?t.history.replaceState(n,null,e):t.history.pushState(n,null,e)}catch(i){t.location[o?"replace":"assign"](e)}s=yt(t),i.forEach((t=>t({location:s,action:"PUSH"})))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(t="/"){let e=0;const i=[{pathname:t,search:""}],s=[];return{get location(){return i[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return i},get index(){return e},get state(){return s[e]},pushState(t,n,o){const[r,a=""]=o.split("?");e++,i.push({pathname:r,search:a}),s.push(t)},replaceState(t,n,o){const[r,a=""]=o.split("?");i[e]={pathname:r,search:a},s[e]=t}}}}()),{navigate:bt}=xt,Pt=/^:(.+)/;function $t(t,e){return t.substr(0,e.length)===e}function St(t){return"*"===t[0]}function vt(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Ct(t){return t.replace(/(^\/+|\/+$)/g,"")}function It(t,e){return{route:t,score:t.default?0:vt(t.path).reduce(((t,e)=>(t+=4,!function(t){return""===t}(e)?!function(t){return Pt.test(t)}(e)?St(e)?t-=5:t+=3:t+=2:t+=1,t)),0),index:e}}function Tt(t,e){let i,s;const[n]=e.split("?"),o=vt(n),r=""===o[0],a=function(t){return t.map(It).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index))}(t);for(let t=0,n=a.length;t<n;t++){const n=a[t].route;let h=!1;if(n.default){s={route:n,params:{},uri:e};continue}const l=vt(n.path),c={},p=Math.max(o.length,l.length);let g=0;for(;g<p;g++){const t=l[g],e=o[g];if(void 0!==t&&St(t)){c["*"===t?"*":t.slice(1)]=o.slice(g).map(decodeURIComponent).join("/");break}if(void 0===e){h=!0;break}let i=Pt.exec(t);if(i&&!r){const t=decodeURIComponent(e);c[i[1]]=t}else if(t!==e){h=!0;break}}if(!h){i={route:n,params:c,uri:"/"+o.slice(0,g).join("/")};break}}return i||s||null}function Dt(t,e){return t+(e?`?${e}`:"")}function Rt(t,e){return`${Ct("/"===e?t:`${Ct(t)}/${Ct(e)}`)}/`}function kt(t){return!t.defaultPrevented&&0===t.button&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Bt(t){let e;const i=t[9].default,s=g(i,t,t[8],null);return{c(){s&&s.c()},m(t,i){s&&s.m(t,i),e=!0},p(t,[n]){s&&s.p&&(!e||256&n)&&f(s,i,t,t[8],e?u(i,t[8],n,null):m(t[8]),null)},i(t){e||(st(s,t),e=!0)},o(t){nt(s,t),e=!1},d(t){s&&s.d(t)}}}function At(t,e,i){let s,n,o,{$$slots:r={},$$scope:a}=e,{basepath:h="/"}=e,{url:l=null}=e;const c=F(mt),g=F(wt),d=ut([]);p(t,d,(t=>i(6,n=t)));const u=ut(null);let f=!1;const m=c||ut(l?{pathname:l}:xt.location);p(t,m,(t=>i(5,s=t)));const w=g?g.routerBase:ut({path:h,uri:h});p(t,w,(t=>i(7,o=t)));const y=ft([w,u],(([t,e])=>{if(null===e)return t;const{path:i}=t,{route:s,uri:n}=e;return{path:s.default?i:s.path.replace(/\*.*$/,""),uri:n}}));return c||(H((()=>xt.listen((t=>{m.set(t.location)})))),O(mt,m)),O(wt,{activeRoute:u,base:w,routerBase:y,registerRoute:function(t){const{path:e}=o;let{path:i}=t;if(t._path=i,t.path=Rt(e,i),"undefined"==typeof window){if(f)return;const e=function(t,e){return Tt([t],e)}(t,s.pathname);e&&(u.set(e),f=!0)}else d.update((e=>(e.push(t),e)))},unregisterRoute:function(t){d.update((e=>{const i=e.indexOf(t);return e.splice(i,1),e}))}}),t.$$set=t=>{"basepath"in t&&i(3,h=t.basepath),"url"in t&&i(4,l=t.url),"$$scope"in t&&i(8,a=t.$$scope)},t.$$.update=()=>{if(128&t.$$.dirty){const{path:t}=o;d.update((e=>(e.forEach((e=>e.path=Rt(t,e._path))),e)))}if(96&t.$$.dirty){const t=Tt(n,s.pathname);u.set(t)}},[d,m,w,h,l,s,n,o,a,r]}class Et extends gt{constructor(t){super(),pt(this,t,At,Bt,a,{basepath:3,url:4})}}const Lt=t=>({params:4&t,location:16&t}),Mt=t=>({params:t[2],location:t[4]});function _t(t){let e,i,s,n;const o=[Ht,Wt],r=[];function a(t,e){return null!==t[0]?0:1}return e=a(t),i=r[e]=o[e](t),{c(){i.c(),s=B()},m(t,i){r[e].m(t,i),C(t,s,i),n=!0},p(t,n){let h=e;e=a(t),e===h?r[e].p(t,n):(et(),nt(r[h],1,1,(()=>{r[h]=null})),it(),i=r[e],i?i.p(t,n):(i=r[e]=o[e](t),i.c()),st(i,1),i.m(s.parentNode,s))},i(t){n||(st(i),n=!0)},o(t){nt(i),n=!1},d(t){r[e].d(t),t&&I(s)}}}function Wt(t){let e;const i=t[10].default,s=g(i,t,t[9],Mt);return{c(){s&&s.c()},m(t,i){s&&s.m(t,i),e=!0},p(t,n){s&&s.p&&(!e||532&n)&&f(s,i,t,t[9],e?u(i,t[9],n,Lt):m(t[9]),Mt)},i(t){e||(st(s,t),e=!0)},o(t){nt(s,t),e=!1},d(t){s&&s.d(t)}}}function Ht(t){let e,s,n;const o=[{location:t[4]},t[2],t[3]];var r=t[0];function a(t){let e={};for(let t=0;t<o.length;t+=1)e=i(e,o[t]);return{props:e}}return r&&(e=new r(a())),{c(){e&&at(e.$$.fragment),s=B()},m(t,i){e&&ht(e,t,i),C(t,s,i),n=!0},p(t,i){const n=28&i?ot(o,[16&i&&{location:t[4]},4&i&&rt(t[2]),8&i&&rt(t[3])]):{};if(r!==(r=t[0])){if(e){et();const t=e;nt(t.$$.fragment,1,0,(()=>{lt(t,1)})),it()}r?(e=new r(a()),at(e.$$.fragment),st(e.$$.fragment,1),ht(e,s.parentNode,s)):e=null}else r&&e.$set(n)},i(t){n||(e&&st(e.$$.fragment,t),n=!0)},o(t){e&&nt(e.$$.fragment,t),n=!1},d(t){t&&I(s),e&&lt(e,t)}}}function jt(t){let e,i,s=null!==t[1]&&t[1].route===t[7]&&_t(t);return{c(){s&&s.c(),e=B()},m(t,n){s&&s.m(t,n),C(t,e,n),i=!0},p(t,[i]){null!==t[1]&&t[1].route===t[7]?s?(s.p(t,i),2&i&&st(s,1)):(s=_t(t),s.c(),st(s,1),s.m(e.parentNode,e)):s&&(et(),nt(s,1,1,(()=>{s=null})),it())},i(t){i||(st(s),i=!0)},o(t){nt(s),i=!1},d(t){s&&s.d(t),t&&I(e)}}}function Ot(t,e,s){let n,o,{$$slots:r={},$$scope:a}=e,{path:h=""}=e,{component:l=null}=e;const{registerRoute:c,unregisterRoute:g,activeRoute:d}=F(wt);p(t,d,(t=>s(1,n=t)));const u=F(mt);p(t,u,(t=>s(4,o=t)));const f={path:h,default:""===h};let m={},y={};var x;return c(f),"undefined"!=typeof window&&(x=()=>{g(f)},W().$$.on_destroy.push(x)),t.$$set=t=>{s(13,e=i(i({},e),w(t))),"path"in t&&s(8,h=t.path),"component"in t&&s(0,l=t.component),"$$scope"in t&&s(9,a=t.$$scope)},t.$$.update=()=>{2&t.$$.dirty&&n&&n.route===f&&s(2,m=n.params);{const{path:t,component:i,...n}=e;s(3,y=n)}},e=w(e),[l,n,m,y,o,d,u,f,h,a,r]}class Ft extends gt{constructor(t){super(),pt(this,t,Ot,jt,a,{path:8,component:0})}}function Gt(t){let e,s,n,o;const r=t[16].default,a=g(r,t,t[15],null);let h=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],l={};for(let t=0;t<h.length;t+=1)l=i(l,h[t]);return{c(){e=D("a"),a&&a.c(),L(e,l)},m(i,r){C(i,e,r),a&&a.m(e,null),s=!0,n||(o=A(e,"click",t[5]),n=!0)},p(t,[i]){a&&a.p&&(!s||32768&i)&&f(a,r,t,t[15],s?u(r,t[15],i,null):m(t[15]),null),L(e,l=ot(h,[(!s||1&i)&&{href:t[0]},(!s||4&i)&&{"aria-current":t[2]},2&i&&t[1],64&i&&t[6]]))},i(t){s||(st(a,t),s=!0)},o(t){nt(a,t),s=!1},d(t){t&&I(e),a&&a.d(t),n=!1,o()}}}function zt(t,e,s){let n;const o=["to","replace","state","getProps"];let r,a,h=y(e,o),{$$slots:l={},$$scope:c}=e,{to:g="#"}=e,{replace:d=!1}=e,{state:u={}}=e,{getProps:f=(()=>({}))}=e;const{base:m}=F(wt);p(t,m,(t=>s(14,a=t)));const x=F(mt);p(t,x,(t=>s(13,r=t)));const b=j();let P,$,S,v;return t.$$set=t=>{e=i(i({},e),w(t)),s(6,h=y(e,o)),"to"in t&&s(7,g=t.to),"replace"in t&&s(8,d=t.replace),"state"in t&&s(9,u=t.state),"getProps"in t&&s(10,f=t.getProps),"$$scope"in t&&s(15,c=t.$$scope)},t.$$.update=()=>{16512&t.$$.dirty&&s(0,P="/"===g?a.uri:function(t,e){if($t(t,"/"))return t;const[i,s]=t.split("?"),[n]=e.split("?"),o=vt(i),r=vt(n);if(""===o[0])return Dt(n,s);if(!$t(o[0],"."))return Dt(("/"===n?"":"/")+r.concat(o).join("/"),s);const a=r.concat(o),h=[];return a.forEach((t=>{".."===t?h.pop():"."!==t&&h.push(t)})),Dt("/"+h.join("/"),s)}(g,a.uri)),8193&t.$$.dirty&&s(11,$=$t(r.pathname,P)),8193&t.$$.dirty&&s(12,S=P===r.pathname),4096&t.$$.dirty&&s(2,n=S?"page":void 0),15361&t.$$.dirty&&s(1,v=f({location:r,href:P,isPartiallyCurrent:$,isCurrent:S}))},[P,v,n,m,x,function(t){if(b("click",t),kt(t)){t.preventDefault();const e=r.pathname===P||d;bt(P,{state:u,replace:e})}},h,g,d,u,f,$,S,r,a,c,l]}class qt extends gt{constructor(t){super(),pt(this,t,zt,Gt,a,{to:7,replace:8,state:9,getProps:10})}}function Ut(t){function e(t){const e=t.currentTarget;""===e.target&&function(t){const e=location.host;return t.host==e||0===t.href.indexOf(`https://${e}`)||0===t.href.indexOf(`http://${e}`)}(e)&&kt(t)&&(t.preventDefault(),bt(e.pathname+e.search,{replace:e.hasAttribute("replace")}))}return t.addEventListener("click",e),{destroy(){t.removeEventListener("click",e)}}}const Nt=[{name:"The Sketchbook Project",description:"artwork that calls the Brooklyn Art Library home. my physical sketchbook is currently on tour!",link:"https://www.sketchbookproject.com/library/21991a"},{name:"catdance",description:"hey don't click this"},{name:"starberry",description:"cHecK oUT mY sOunDCL0ud!! hahA it's ok I guess but it could be better,,,",link:"https://soundcloud.com/capybo"},{name:"Betty",description:"these are completed pages of a repurposed quad notebook that I halved over time. named after a dear friend who is no longer with us."}];function Yt(t,e,i){const s=t.slice();return s[0]=e[i],s}function Zt(e){let i,s,n=e[0].name+"";return{c(){i=D("a"),s=R(n),E(i,"target","_blank"),E(i,"href",e[0].link),E(i,"class","svelte-14stb5n")},m(t,e){C(t,i,e),v(i,s)},p:t,d(t){t&&I(i)}}}function Kt(e){let i,s,n,o,a=e[0].name+"";return{c(){i=D("a"),s=R(a),E(i,"href",e[0].name.toLowerCase()),E(i,"class","svelte-14stb5n")},m(e,a){var h;C(e,i,a),v(i,s),n||(h=Ut.call(null,i),o=h&&r(h.destroy)?h.destroy:t,n=!0)},p:t,d(t){t&&I(i),n=!1,o()}}}function Xt(t){let e,i,s,n,o=t[0].description+"";let r=function(t,e){return"Betty"===t[0].name||"catdance"===t[0].name?Kt:Zt}(t)(t);return{c(){e=D("li"),r.c(),i=R("\n\t\t\t\t- "),s=R(o),n=k(),E(e,"class","svelte-14stb5n")},m(t,o){C(t,e,o),r.m(e,null),v(e,i),v(e,s),v(e,n)},p(t,e){r.p(t,e)},d(t){t&&I(e),r.d()}}}function Vt(e){let i,s,n,o,r,a,h=Nt,l=[];for(let t=0;t<h.length;t+=1)l[t]=Xt(Yt(e,h,t));return{c(){i=D("section"),s=D("header"),s.innerHTML='<h1 class="svelte-14stb5n">circlecircle.studio</h1>',n=k(),o=D("div"),o.innerHTML='<p class="svelte-14stb5n">setting up my own website is very time consuming and I&#39;m pretty much exhausted all the time.</p> \n\n\t\t\t<p class="svelte-14stb5n">I have better things to do like overshare on\n\t\t\t\t<a href="https://www.instagram.com/copy____cat___/" class="svelte-14stb5n">Instagram</a>\n\t\t\t\t and\n\t\t\t\t<a href="https://www.facebook.com/facebo/" class="svelte-14stb5n">Facebook</a></p> \n\n\t\t\t<p class="svelte-14stb5n">knowing me, this thing will forever be under construction - so i forced this\n\t\t\t<a href="https://syncretik.co" class="svelte-14stb5n">shit-eating goblin</a>\n\t\t\tto make it for me</p> \n\n\t\t\t<p class="svelte-14stb5n">for now, check out some stuff I did, or tried to do:</p>',r=k(),a=D("div");for(let t=0;t<l.length;t+=1)l[t].c();E(o,"class","text-tile svelte-14stb5n"),E(a,"class","texttile"),E(i,"id","description-section"),E(i,"class","svelte-14stb5n")},m(t,e){C(t,i,e),v(i,s),v(i,n),v(i,o),v(i,r),v(i,a);for(let t=0;t<l.length;t+=1)l[t].m(a,null)},p(t,[e]){if(0&e){let i;for(h=Nt,i=0;i<h.length;i+=1){const s=Yt(t,h,i);l[i]?l[i].p(s,e):(l[i]=Xt(s),l[i].c(),l[i].m(a,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=h.length}},i:t,o:t,d(t){t&&I(i),T(l,t)}}}class Jt extends gt{constructor(t){super(),pt(this,t,null,Vt,a,{})}}function Qt(e){let i;return{c(){i=D("section"),i.innerHTML='<footer class="svelte-1kw3red">Built by <a href="https://syncretik.co" class="svelte-1kw3red">[Syncretik]</a> 2021, All Rights Reserved.</footer>',E(i,"id","black-block"),E(i,"class","svelte-1kw3red")},m(t,e){C(t,i,e)},p:t,i:t,o:t,d(t){t&&I(i)}}}class te extends gt{constructor(t){super(),pt(this,t,null,Qt,a,{})}}function ee(e){let i,s,n,o,r;return s=new Jt({}),o=new te({}),{c(){i=D("main"),at(s.$$.fragment),n=k(),at(o.$$.fragment),E(i,"class","svelte-1u5yuu")},m(t,e){C(t,i,e),ht(s,i,null),v(i,n),ht(o,i,null),r=!0},p:t,i(t){r||(st(s.$$.fragment,t),st(o.$$.fragment,t),r=!0)},o(t){nt(s.$$.fragment,t),nt(o.$$.fragment,t),r=!1},d(t){t&&I(i),lt(s),lt(o)}}}class ie extends gt{constructor(t){super(),pt(this,t,null,ee,a,{})}}function se(t){const e=t-1;return e*e*e+1}function ne(t){return"[object Date]"===Object.prototype.toString.call(t)}function oe(t,e){if(t===e||t!=t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map(((e,i)=>oe(t[i],e)));return t=>i.map((e=>e(t)))}if("object"===i){if(!t||!e)throw new Error("Object cannot be null");if(ne(t)&&ne(e)){t=t.getTime();const i=(e=e.getTime())-t;return e=>new Date(t+e*i)}const i=Object.keys(e),s={};return i.forEach((i=>{s[i]=oe(t[i],e[i])})),t=>{const e={};return i.forEach((i=>{e[i]=s[i](t)})),e}}if("number"===i){const i=e-t;return e=>t+e*i}throw new Error(`Cannot interpolate ${i} values`)}function re(t,s={}){const n=ut(t);let o,r=t;function a(a,h){if(null==t)return n.set(t=a),Promise.resolve();r=a;let l=o,c=!1,{delay:p=0,duration:g=400,easing:d=e,interpolate:u=oe}=i(i({},s),h);if(0===g)return l&&(l.abort(),l=null),n.set(t=r),Promise.resolve();const f=b()+p;let m;return o=function(t){let e;return 0===$.size&&P(S),{promise:new Promise((i=>{$.add(e={c:t,f:i})})),abort(){$.delete(e)}}}((e=>{if(e<f)return!0;c||(m=u(t,a),"function"==typeof g&&(g=g(t,a)),c=!0),l&&(l.abort(),l=null);const i=e-f;return i>g?(n.set(t=a),!1):(n.set(t=m(d(i/g))),!0)})),o.promise}return{set:a,update:(e,i)=>a(e(r,t),i),subscribe:n.subscribe}}function ae(t){let e;return{c(){e=D("button"),e.textContent="↩",E(e,"id","back-btn"),E(e,"class","svelte-tod0k2")},m(t,i){C(t,e,i)},d(t){t&&I(e)}}}function he(t){let e,i;return e=new qt({props:{to:"/",$$slots:{default:[ae]},$$scope:{ctx:t}}}),{c(){at(e.$$.fragment)},m(t,s){ht(e,t,s),i=!0},p(t,[i]){const s={};1&i&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){i||(st(e.$$.fragment,t),i=!0)},o(t){nt(e.$$.fragment,t),i=!1},d(t){lt(e,t)}}}class le extends gt{constructor(t){super(),pt(this,t,null,he,a,{})}}function ce(e){let i,s,n,o,r,a,h,c,p,g,d,u,f,m,w;return p=new le({}),{c(){i=D("main"),s=D("h2"),n=R("hey, kid."),o=D("h2"),r=D("h2"),a=R("You want some "),h=D("span"),h.textContent="memes?",c=k(),at(p.$$.fragment),g=k(),d=D("img"),E(h,"id","meme-btn"),E(h,"class","svelte-9ojjab"),E(r,"class","svelte-9ojjab"),l(d.src,u="./assets/awake but at what cost.jpg")||E(d,"src","./assets/awake but at what cost.jpg"),E(d,"alt","boobooboo"),E(d,"class","svelte-9ojjab"),E(o,"class","svelte-9ojjab"),E(s,"class","svelte-9ojjab"),E(i,"class","svelte-9ojjab")},m(t,l){C(t,i,l),v(i,s),v(s,n),v(s,o),v(o,r),v(r,a),v(r,h),v(o,c),ht(p,o,null),v(o,g),v(o,d),f=!0,m||(w=A(h,"click",e[0]),m=!0)},p:t,i(t){f||(st(p.$$.fragment,t),f=!0)},o(t){nt(p.$$.fragment,t),f=!1},d(t){t&&I(i),lt(p),m=!1,w()}}}function pe(t){let e;H((async()=>{await i("./assets/wew.mp3",2),e=await i("./assets/froge_dance.mp3",1.5)}));const i=async(t,e)=>{const i=new(window.AudioContext||window.webkitAudioContext),s=i.createBufferSource(),n=new Request(t),o=await fetch(n),r=await o.arrayBuffer();return i.decodeAudioData(r,(function(t){s.buffer=t,s.connect(i.destination)})),s.playbackRate.value=e,s},s=t=>Math.floor(Math.random()*t);return re(0,{duration:400,easing:se}),[t=>{t.preventDefault();const i=document.querySelector("img");i.getBoundingClientRect();let n=0;setInterval((()=>{const t=document.createElement("canvas"),o=t.getContext("2d");((t,e,i)=>{const s=Math.min(e.width/t.width,e.height/t.height),n=e.width/2-t.width/2*s,o=e.height/2-t.height/2*s;i.drawImage(t,n,o,t.width*s,t.height*s)})(i,t,o),t.style.position="absolute",t.style.zIndex=s();const r=s(window.innerWidth-300),a=s(window.innerHeight-150);t.style.left=`${r>=0?r:0}px`,t.style.top=`${a>=0?a:0}px`,i.parentNode.insertBefore(t,i.nextSibling),420===n&&(clearInterval(),(()=>{alert("byebye ^_^");const t=document.querySelector("main");t.parentNode.removeChild(t);const i=document.querySelector("body"),s=new Image;s.src="./assets/froge.gif",s.style.width="100vw",s.style.height="100vh",i.append(s),e.start(0,30)})()),n++}),5)}]}class ge extends gt{constructor(t){super(),pt(this,t,pe,ce,a,{})}}function de(t,e,i){const s=t.slice();return s[3]=e[i],s}function ue(t){let e,i,s;return{c(){e=D("video"),e.muted=i=t[3].muted,e.autoplay=!0,e.loop="true",l(e.src,s="./assets/cat-dance.mp4")||E(e,"src","./assets/cat-dance.mp4"),E(e,"class","svelte-bn16j1")},m(t,i){C(t,e,i)},p(t,s){1&s&&i!==(i=t[3].muted)&&(e.muted=i)},d(t){t&&I(e)}}}function fe(t){let e,i,s,n,o=t[0],r=[];for(let e=0;e<o.length;e+=1)r[e]=ue(de(t,o,e));return s=new le({props:{"style-{{":!0,"opacity:":!0,"0,":!0,"height:":!0,"100vh,":!0,"weight:":!0,"100vw,":!0,"z-index:":!0,"10,":!0,"}}":!0}}),{c(){e=D("main");for(let t=0;t<r.length;t+=1)r[t].c();i=k(),at(s.$$.fragment),E(e,"class","svelte-bn16j1")},m(t,o){C(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);v(e,i),ht(s,e,null),n=!0},p(t,[s]){if(1&s){let n;for(o=t[0],n=0;n<o.length;n+=1){const a=de(t,o,n);r[n]?r[n].p(a,s):(r[n]=ue(a),r[n].c(),r[n].m(e,i))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}},i(t){n||(st(s.$$.fragment,t),n=!0)},o(t){nt(s.$$.fragment,t),n=!1},d(t){t&&I(e),T(r,t),lt(s)}}}function me(t,e,i){const s=new Array(8).fill({muted:!0});return s[0]={muted:!1},H((async()=>{})),[s]}class we extends gt{constructor(t){super(),pt(this,t,me,fe,a,{})}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var ye,xe=(function(t,e){!function(t){class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();for(let t of this.state.area)null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,s,n):this.drawLoader(e,{x:0,y:0},s,n),e.restore()}simpleDraw(t){const e=this.render.getRect(),i=this.render.getContext(),s=e.pageWidth,n=e.height,o=1===t?e.left+e.pageWidth:e.left,r=e.top;this.isLoad?i.drawImage(this.image,o,r,s,n):this.drawLoader(i,{x:o,y:r},s,n)}drawLoader(t,e,i,s){t.beginPath(),t.strokeStyle="rgb(200, 200, 200)",t.fillStyle="rgb(255, 255, 255)",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,s-1),t.stroke(),t.fill();const n={x:e.x+i/2,y:e.y+s/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity("hard"))}getSpread(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error("Invalid page number")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):"landscape"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends s{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(const t of this.imagesHref){const e=new i(this.render,t,"soft");e.load(),this.pages.push(e)}this.createSpread()}}class o{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return o.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,o=e[1].x-e[0].x;return Math.acos((i*s+n*o)/(Math.sqrt(i*i+n*n)*Math.sqrt(s*s+o*o)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(o.GetDistanceBetweenTwoPoint(t,i)<=e)return i;const s=t.x,n=t.y,r=i.x,a=i.y;let h=Math.sqrt(Math.pow(e,2)*Math.pow(s-r,2)/(Math.pow(s-r,2)+Math.pow(n-a,2)))+s;i.x<0&&(h*=-1);let l=(h-s)*(n-a)/(s-r)+n;return s-r+n===0&&(l=e),{x:h,y:l}}static GetIntersectBetweenTwoSegment(t,e,i){return o.PointInRect(t,o.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,o=e[1].x-e[0].x,r=t[0].x*t[1].y-t[1].x*t[0].y,a=e[0].x*e[1].y-e[1].x*e[0].y,h=i*a-s*r,l=n*a-o*r,c=-(r*o-a*n)/(i*o-s*n),p=-(i*a-s*r)/(i*o-s*n);if(isFinite(c)&&isFinite(p))return{x:c,y:p};if(Math.abs(h-l)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.max(i,s),o=[t];function r(t,e,i,s,n){return e>t?t+n*(i/s):e<t?t-n*(i/s):t}for(let a=1;a<=n;a+=1)o.push({x:r(t.x,e.x,i,n,a),y:r(t.y,e.y,s,n,a)});return o}}class r extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add("stf__item"),this.element.classList.add("--"+i)}newTemporaryCopy(){return"hard"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new r(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove("--simple");const o=`\n            display: block;\n            z-index: ${this.element.style.zIndex};\n            left: 0;\n            top: 0;\n            width: ${s}px;\n            height: ${n}px;\n        `;"hard"===e?this.drawHard(o):this.drawSoft(i,o)}drawHard(t=""){const e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,s=t+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; \n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=s}drawSoft(t,e=""){let i="polygon( ";for(const t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};e=o.GetRotatedPoint(e,{x:0,y:0},this.state.angle),i+=e.x+"px "+e.y+"px, "}i=i.slice(0,-2),i+=")";const s=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=s}simpleDraw(t){const e=this.render.getRect(),i=e.pageWidth,s=e.height,n=1===t?e.left+e.pageWidth:e.left,o=e.top;this.element.classList.add("--simple"),this.element.style.cssText=`\n            position: absolute; \n            display: block; \n            height: ${s}px; \n            left: ${n}px; \n            top: ${o}px; \n            width: ${i}px; \n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove("--left","--right"),this.element.classList.add(1===t?"--right":"--left")}setDrawingDensity(t){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+t),super.setDrawingDensity(t)}}class a extends s{constructor(t,e,i,s){super(t,e),this.element=i,this.pagesElement=s}load(){for(const t of this.pagesElement){const e=new r(this.render,t,"hard"===t.dataset.density?"hard":"soft");e.load(),this.pages.push(e)}this.createSpread()}}class h{constructor(t,e,i,s){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(s,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||"bottom"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),"top"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?o.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):"top"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=o.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e="top"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error("Point is too small");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,i="bottom"===this.corner?this.pageHeight-t.y:t.y;let s=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(s=-s);const n=Math.PI-s;if(!isFinite(s)||n>=0&&n<.003)throw new Error("The G point is too small");return"bottom"===this.corner&&(s=-s),s}getPageRect(t){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};"top"===this.corner?(this.topIntersectPoint=o.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=o.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=o.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=o.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=o.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=o.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,i){let s=t;const n=o.LimitPointToCircle(e,this.pageWidth,s);s!==n&&(s=n,this.updateAngleAndGeometry(s));const r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let a=this.rect.bottomRight,h=this.rect.topLeft;if("bottom"===this.corner&&(a=this.rect.topRight,h=this.rect.bottomLeft),a.x<=0){const t=o.LimitPointToCircle(i,r,h);t!==s&&(s=t,this.updateAngleAndGeometry(s))}return s}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class l{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=t,this.app=e}fold(t){this.setState("user_fold"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState("flipping");const i=e.height/10,s="bottom"===this.calc.getCorner()?e.height-i:i,n="bottom"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:s}),this.animateFlippingTo({x:e.pageWidth-i,y:s},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();const e=this.render.convertToBook(t),i=this.getBoundsRect(),s=this.getDirectionByPoint(e),n=e.y>=i.height/2?"bottom":"top";if(!this.checkDirection(s))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(s),this.bottomPage=this.app.getPageCollection().getBottomPage(s),"landscape"===this.render.getOrientation())if(1===s){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),t.setDrawingDensity("hard"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),t.setDrawingDensity("hard"))}return this.render.setDirection(s),this.calc=new h(s,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const i=this.app.getPageCollection().getCurrentSpreadIndex(),s=this.app.getPageCollection().getSpreadIndexByPage(t);try{s>i&&(this.app.getPageCollection().setCurrentSpreadIndex(s-1),this.flipNext(e)),s<i&&(this.app.getPageCollection().setCurrentSpreadIndex(s+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:"top"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),i="bottom"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState("read","fold_corner"))return;const e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState("fold_corner"),this.calc.calc({x:i-1,y:1});const s=50,n="bottom"===this.calc.getCorner()?e.height-1:1,o="bottom"===this.calc.getCorner()?e.height-s:s;this.animateFlippingTo({x:i-1,y:n},{x:i-s,y:o},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,s=!0){const n=o.GetCordsFromTwoPoint(t,e),r=[];for(const t of n)r.push((()=>this.do(t)));const a=this.getAnimationDuration(n.length);this.render.startAnimation(r,a,(()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),s&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))}))}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),i=e.pageWidth,s=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);return n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<s||n.x>e.width-s)&&(n.y<s||n.y>e.height-s)}}class c{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const i=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t="landscape";const e=this.getBlockWidth(),i=e/2,s=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let o=this.setting.width,r=this.setting.height,a=i-o;return"stretch"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t="portrait"),o="portrait"===t?this.getBlockWidth():this.getBlockWidth()/2,o>this.setting.maxWidth&&(o=this.setting.maxWidth),r=o/n,r>this.getBlockHeight()&&(r=this.getBlockHeight(),o=r*n),a="portrait"===t?i-o/2-o:i-o):e<2*o&&this.app.getSettings().usePortrait&&(t="portrait",a=i-o/2-o),this.boundsRect={left:a,top:s-r/2,width:2*o,height:r,pageWidth:o},t}setShadowData(t,e,i,s){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:s,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class p extends c{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();"portrait"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);const s=this.ctx.createLinearGradient(0,0,e,0);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),s.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),s.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),s.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),s.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),i.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,s,0);0===this.shadow.direction?(this.ctx.translate(-s,-100),n.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),n.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),n.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),n.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,s,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class g{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout((()=>{null!==this.touchPoint&&this.app.startUserTouch(i)}),this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||"read"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),"read"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);let s=!1;if(null!==this.touchPoint){const t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),s=!0),this.touchPoint=null}this.app.userStop(i,s)}},this.parentElement=t,t.classList.add("stf__parent"),t.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=t.querySelector(".stf__wrapper"),this.app=e;const s=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*s+"px",t.style.minHeight=i.minHeight+"px","fixed"===i.size&&(t.style.minWidth=i.width*s+"px",t.style.minHeight=i.height+"px"),i.autoSize&&(t.style.width="100%",t.style.maxWidth=2*i.maxWidth+"px"),t.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove("--portrait","--landscape"),"portrait"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(t,e){const i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||!["a","button"].includes(t.tagName.toLowerCase())}}class d extends g{constructor(t,e,i,s){super(t,e,i),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=t.querySelector(".stf__block"),this.items=s;for(const t of s)this.distElement.appendChild(t);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML="";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class u extends g{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=t.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue("width"),10),i=parseInt(t.getPropertyValue("height"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class f extends c{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>'),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let s=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\n            width: ${i}px;\n            height: ${t.height}px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ${t.left+t.width/2}px;\n            transform-origin: 0 0;\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=s}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\n            width: ${e}px;\n            height: ${t.height}px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\n            left: ${t.left+t.width/2}px;\n            transform-origin: 0 0;\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=i}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,s=0===this.getDirection()?"to left":"to right",n=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,a=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let h="polygon( ";for(const t of a){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=o.GetRotatedPoint(e,{x:i,y:100},r),h+=e.x+"px "+e.y+"px, "}h=h.slice(0,-2),h+=")";const l=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\n            width: ${e}px;\n            height: ${2*t.height}px;\n            background: linear-gradient(${s},\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ${i}px 100px;\n            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${r}rad);\n            clip-path: ${h};\n            -webkit-clip-path: ${h};\n        `;this.innerShadow.style.cssText=l}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,s=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?"to right":"to left",r=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let a="polygon( ";for(const t of r)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=o.GetRotatedPoint(e,{x:s,y:100},i),a+=e.x+"px "+e.y+"px, "}a=a.slice(0,-2),a+=")";const h=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\n            width: ${this.shadow.width}px;\n            height: ${2*t.height}px;\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\n            transform-origin: ${s}px 100px;\n            transform: translate3d(${e.x-s}px, ${e.y-100}px, 0) rotate(${i}rad);\n            clip-path: ${a};\n            -webkit-clip-path: ${a};\n        `;this.outerShadow.style.cssText=h}drawLeftPage(){"portrait"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;"portrait"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&("soft"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText="display: none"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class m{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),"stretch"!==e.size&&"fixed"!==e.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(e.width<=0||e.height<=0)throw new Error("Invalid width or height");if(e.flippingTime<=0)throw new Error("Invalid flipping time");return"stretch"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}"),t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(const s of this.events.get(t))s({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new m).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new p(this,this.setting,e),this.flipController=new l(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout((()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})}),1)}loadFromHTML(t){this.ui=new d(this.block,this,this.setting,t),this.render=new f(this,this.setting,this.ui.getDistElement()),this.flipController=new l(this.render,this),this.pages=new a(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout((()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})}),1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new a(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t="top"){this.flipController.flipNext(t)}flipPrev(t="top"){this.flipController.flipPrev(t)}flip(t,e="top"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger("changeState",this,t)}updatePageIndex(t){this.trigger("flip",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger("changeOrientation",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&o.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,"__esModule",{value:!0})}(e)}(ye={exports:{}},ye.exports),ye.exports);function be(e){let i,s,n,o,r;return o=new le({}),{c(){i=D("main"),s=D("div"),n=k(),at(o.$$.fragment),E(s,"id","flipbook"),E(i,"id","table"),E(i,"class","svelte-s6xtaa")},m(t,e){C(t,i,e),v(i,s),v(i,n),ht(o,i,null),r=!0},p:t,i(t){r||(st(o.$$.fragment,t),r=!0)},o(t){nt(o.$$.fragment,t),r=!1},d(t){t&&I(i),lt(o)}}}function Pe(t){return H((async()=>{const t=document.querySelector("#flipbook");new xe.PageFlip(t,{width:360,height:340,maxShadowOpacity:.5}).loadFromImages(["./assets/Betty/A Cloudy Day by the Sea.jpeg","./assets/Betty/Cactus Dance II.jpeg","./assets/Betty/Cactus Dance.jpeg","./assets/Betty/Cloud Garden.jpeg","./assets/Betty/Colorcruise.jpeg","./assets/Betty/Cosmic Dust.jpeg","./assets/Betty/Darkness Creeps In.jpeg","./assets/Betty/Deathstar.jpeg","./assets/Betty/Discovery.jpeg","./assets/Betty/Diver.jpeg","./assets/Betty/Everything Dies.jpeg","./assets/Betty/Falling Off the Canvas.jpeg","./assets/Betty/Flora.jpeg","./assets/Betty/Funnel.jpeg","./assets/Betty/Jitters.jpeg","./assets/Betty/Kestrel.jpeg","./assets/Betty/Kineticity.jpeg","./assets/Betty/King Frog.jpeg","./assets/Betty/Last of the Dinosaurs.jpeg","./assets/Betty/Mecharoot.jpeg","./assets/Betty/Mesh Potatoes.jpeg","./assets/Betty/New Perspective.jpeg","./assets/Betty/Roads that Lead to Something.jpeg","./assets/Betty/Serpentine.jpeg","./assets/Betty/Shirley & the Medium Hypnosis.jpeg","./assets/Betty/Space Junk.jpeg","./assets/Betty/Tangle.jpeg","./assets/Betty/This Could Be Sexual.jpeg","./assets/Betty/Unstructural Sound.jpeg","./assets/Betty/Valleys & Peaks.jpeg","./assets/Betty/Yeeted into the Abyss.jpeg","./assets/Betty/the-end.jpeg"])})),[]}class $e extends gt{constructor(t){super(),pt(this,t,Pe,be,a,{})}}function Se(e){let i,s,n,o,r,a,h,l,c;return s=new Ft({props:{path:"betty",component:$e}}),o=new Ft({props:{path:"chananigans",component:ge}}),a=new Ft({props:{path:"catdance",component:we}}),l=new Ft({props:{path:"/",component:ie}}),{c(){i=D("div"),at(s.$$.fragment),n=k(),at(o.$$.fragment),r=k(),at(a.$$.fragment),h=k(),at(l.$$.fragment)},m(t,e){C(t,i,e),ht(s,i,null),v(i,n),ht(o,i,null),v(i,r),ht(a,i,null),v(i,h),ht(l,i,null),c=!0},p:t,i(t){c||(st(s.$$.fragment,t),st(o.$$.fragment,t),st(a.$$.fragment,t),st(l.$$.fragment,t),c=!0)},o(t){nt(s.$$.fragment,t),nt(o.$$.fragment,t),nt(a.$$.fragment,t),nt(l.$$.fragment,t),c=!1},d(t){t&&I(i),lt(s),lt(o),lt(a),lt(l)}}}function ve(t){let e,i;return e=new Et({props:{url:t[0],$$slots:{default:[Se]},$$scope:{ctx:t}}}),{c(){at(e.$$.fragment)},m(t,s){ht(e,t,s),i=!0},p(t,[i]){const s={};1&i&&(s.url=t[0]),2&i&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){i||(st(e.$$.fragment,t),i=!0)},o(t){nt(e.$$.fragment,t),i=!1},d(t){lt(e,t)}}}function Ce(t,e,i){let{url:s=""}=e;return t.$$set=t=>{"url"in t&&i(0,s=t.url)},[s]}class Ie extends gt{constructor(t){super(),pt(this,t,Ce,ve,a,{url:0})}}function Te(e){let i,s;return i=new Ie({}),{c(){at(i.$$.fragment)},m(t,e){ht(i,t,e),s=!0},p:t,i(t){s||(st(i.$$.fragment,t),s=!0)},o(t){nt(i.$$.fragment,t),s=!1},d(t){lt(i,t)}}}function De(t,e,i){let{name:s}=e;return t.$$set=t=>{"name"in t&&i(0,s=t.name)},[s]}return new class extends gt{constructor(t){super(),pt(this,t,De,Te,a,{name:0})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
